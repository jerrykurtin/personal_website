<!DOCTYPE html>
<html lang="en">
<head>
    <link id = "style" rel="stylesheet" href="style1.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jerry Kurtin</title>
</head>
<body>
    <div class="mainWrapper">
        <!-- menu bar -->
        <ul class="upper-menu">
            <li><a class="active" href="index.html">Home</a></li>
            <li><a href="pages/skills.html">Skills</a></li>
            <li><a href="pages/portfolio.html">Portfolio</a></li>
            <li><a href="pages/ervice.html">Service</a></li>
            <li><a href="pages/about.html">About</a></li>
        </ul>

        <div class="heading">
            <h1 class="wavy" id="main-title">Jerry Kurtin</h1>
        </div>
        <div class="subheading" id="main-subtitle">
            <!-- mode switch -->
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
              </label>
              <em><i class="uil uil-arrow-left"></i> Fluid Mode</em>
            </div>
    
            <p id="mobile-friendly">Mobile-Friendly Website!</p>
        </div>


        <div class="menu" id="menu">
            <div class="leftmenu" id="leftmenu">
                <a href="pages/skills.html">
                    <div class="menu-select upper" id="skills-menu">Skills</div>
                </a>
                <a href="pages/about.html">
                    <div class="menu-select lower" id="abt-menu">About</div>
                </a>
            </div>
            <img src="media/headshot.png" alt="Jerry's Portrait" id="headshot"/>
            <div class="rightmenu" id="rightmenu">
                <a href="pages/portfolio.html">
                    <div class="menu-select upper" id="port-menu">Portfolio</div>
                </a>
                <a href="pages/service.html">
                    <div class="menu-select lower" id="service-menu">Service</div>
                </a>
            </div>
        </div>

        <a href="pages/ai.html">
            <div id="ai-select" class="menu-select">A.I.-Generated Page</div>
        </a>

        <div class="heading">
            <h2 class="bubbly">At-A Glance</h2>
        </div>
        <div class="bubbles-wrapper">
            <!-- <svg id="school-circle" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <path fill="#FF0000" d="M37.7,-27.3C53.2,-10.7,73,5.3,70.8,16.7C68.7,28.1,44.4,35,23.2,43.4C2,51.8,-16.2,61.6,-34.3,58C-52.4,54.4,-70.4,37.3,-70.2,21C-69.9,4.7,-51.4,-10.8,-36.7,-27.3C-22,-43.8,-11,-61.4,0.1,-61.4C11.1,-61.5,22.2,-44,37.7,-27.3Z" transform="translate(100 100)" />
                </defs>
            </svg> -->
            <div class="circle-container" id="school-circle-pos">
                <div id="school-circle" class="circle-base">
                    <i class="uil uil-university"></i><strong> School </strong>
                    <br/>Computer Science<br/>Texas A&M Honors<br/>GPA: 4.0
                </div>
            </div>

            <div class="circle-container" id="linkedin-circle-pos">
                <a href="https://www.linkedin.com/in/jerry-kurtin" target="_blank" rel="noopener noreferrer">
                    <div id="linkedin-circle" class="circle-base">
                        <i class="uil uil-linkedin"></i>
                    </div>
                </a>
                
            </div>
            
            <div class="circle-container" id="duel2048-circle-pos">
                <a href="https://www.2048duel.com" target="_blank" rel="noopener noreferrer">
                <div id="duel2048-circle" class="circle-base" >
                    <i class="uil uil-link"></i> <strong>Project:</strong><br/>
                    2048 Duel!
                    <!-- <img src="media/2048duel.png" alt="2048 duel image" id="duel2048-img"/> -->
                </div>
                </a>
            </div>

            <div class="circle-container" id="hobbies-circle-pos">
                <div id="hobbies-circle" class="circle-base">
                    <i class="uil uil-hourglass"></i> <strong>Hobbies</strong><br/>
                    Climbing <i class="uil uil-mountains-sun"></i><br/>
                    Jazz Drumming <i class="uil uil-music"></i><br/>
                    Backpacking <i class="uil uil-backpack"></i><br/>
                    Reading <i class="uil uil-book-open"></i><br/>
                </div>
            </div>

            <div class="circle-container" id="flock-circle-pos">
                <a href="https://devpost.com/software/flock-9yb8iq" target="_blank" rel="noopener noreferrer">
                    <div id="flock-circle" class="circle-base">
                        <i class="uil uil-link"></i> </i> <strong>Project:</strong><br/>
                        Flock <i class="uil uil-message"></i><br/>
                        3rd Place<br/>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <scipt type="text/javascript", src="pagesetup.js"></scipt>
    <script>

        // ------------------------ scroll mechanics ------------------------
        function getScrollPercent() {
            var h = document.documentElement, 
                b = document.body,
                st = 'scrollTop',
                sh = 'scrollHeight';
            return (h[st]||b[st]) / ((h[sh]||b[sh]) - h.clientHeight) * 100;
        }

        function updateScroll(){
            var scrollPercent = getScrollPercent() / 100;
            
            var lmenu = document.getElementById("leftmenu");
            var rmenu = document.getElementById("rightmenu");

            // determine the scroll function
            var scrollfunct;
            if (localStorage["theme"] && localStorage["theme"] == "style2"){
                scrollfunct = function (scrollPercent) {
                    return Math.sin((scrollPercent + .6) * Math.PI * .63);
                    // return Math.sin((scrollPercent + .7) * Math.PI * .6);
                    // return Math.sin((scrollPercent + .4) * Math.PI);

                }
            }
            else{
                scrollfunct = function (scrollPercent) {
                    return 1;
                    // return 1 - scrollPercent;
                }
            }

            let movePercent = scrollfunct(scrollPercent);
            var width = Math.max(0, (50 * (movePercent)));

            lmenu.style.width =  width + "%";
            rmenu.style.width =  width + "%";
            lmenu.style.marginLeft = (50 - width) + "%";

            if (localStorage["theme"] && localStorage["theme"] == "style2"){
                document.getElementById("main-title").style.opacity = (1 - 5 * scrollPercent);
                document.getElementById("main-subtitle").style.opacity = (1 - 5 * scrollPercent);

            }
        }

        document.addEventListener('scroll', updateScroll);

        // ------------------------ Scroll Observer ------------------------

        // callback function to update circles
        let circleCallback = (entries, observer) => {
            entries.forEach((entry) => {

                if (entry.isIntersecting){
                    entry.target.classList.add("visible");
                }
                else {
                    entry.target.classList.remove("visible");
                }
            });
        };

        let obsOptions = {
            // root: document.querySelector('#scrollArea'),
            rootMargin: '0px',
            threshold: 0.5
        }

        let observer = new IntersectionObserver(circleCallback, obsOptions);
        const bubbles = document.querySelectorAll(".circle-base");
        console.log("observing: ", bubbles.length, " circles");
        bubbles.forEach((el) => {
            observer.observe(el);
        })

        // ------------------------ Stylesheet Changes ------------------------
        function changeStylesheet(newStyle){
            document.getElementById("style").setAttribute("href", newStyle + ".css");
            updateScroll();
        }

        // listener for mode switch
        const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
        function switchTheme(e) {
            if (e.target.checked) {
                localStorage.setItem('theme', 'style2');
                changeStylesheet("style2");
            }
            else {
                localStorage.setItem('theme', 'style1');
                changeStylesheet("style1");
            }    
        }
        toggleSwitch.addEventListener('change', switchTheme, false);

        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
        if (currentTheme) {
            document.documentElement.setAttribute('data-theme', currentTheme);

            if (currentTheme === 'style2') {
                toggleSwitch.checked = true;
                changeStylesheet("style2");
            }
        }

    </script>
    
</body>
</html>